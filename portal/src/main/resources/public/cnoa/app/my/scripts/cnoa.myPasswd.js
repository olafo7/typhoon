var CNOA_my_passwdClass,CNOA_my_passwd;CNOA_my_passwdClass=CNOA.Class.create();CNOA_my_passwdClass.prototype={init:function(){var a=this;this.actionUrl="index.php?app=my&func=info&action=index";this.ID_btn_save=Ext.id();this.ID_btn_apply=Ext.id();this.ID_btn_close=Ext.id();this.formPanel=new Ext.form.FormPanel({hideBorders:true,border:false,waitMsgTarget:true,labelWidth:60,labelAlign:"right",items:[{xtype:"panel",border:false,layout:"form",bodyStyle:"padding: 10px",defaults:{width:230},items:[{xtype:"textfield",name:"oldpasswd",fieldLabel:lang("oldPwd"),allowBlank:false,inputType:"password"},{xtype:"textfield",name:"newpasswd",fieldLabel:lang("newPwd"),allowBlank:false,inputType:"password",regex:/^[\s\S]{4,16}$/,regexText:lang("newPwdLengthNotice")},{xtype:"textfield",name:"compasswd",fieldLabel:lang("confirmPwd"),allowBlank:false,inputType:"password"}]}]});this.mainPanel=new Ext.Window({width:357,height:185,autoDestroy:true,closeAction:"close",resizable:false,title:lang("editPwd"),layout:"fit",items:[this.formPanel],listeners:{close:function(){Ext.destroy(CNOA_my_passwd);CNOA_my_passwd=null;a.closeTab();try{a.closeTab()}catch(b){}}},buttons:[{xtype:"cnoa_helpBtn",helpid:87},{text:lang("save"),id:this.ID_btn_save,iconCls:"icon-btn-save",cls:"btn-blue4",handler:function(){this.submitForm({close:true})}.createDelegate(this)},{text:lang("cancel"),cls:"btn-red1",id:this.ID_btn_close,iconCls:"icon-dialog-cancel",handler:function(){a.close()}}]})},show:function(){this.mainPanel.show()},close:function(){this.mainPanel.close()},closeTab:function(){mainPanel.closeTab(CNOA.my.index.passwd.parentID.replace("docs-",""))},submitForm:function(b){var h=this;var c=this.formPanel.getForm();if(c.isValid()){var g=c.findField("oldpasswd");var e=c.findField("newpasswd");var d=c.findField("compasswd");if(g.getValue()==e.getValue()){var a=Ext.getCmp(this.ID_btn_save).getEl().getBox();a=[a.x+35,a.y+26];CNOA.miniMsg.alert(lang("samePwdNotice"),a);e.focus(true,100);return false}if(e.getValue()!=d.getValue()){var a=Ext.getCmp(this.ID_btn_save).getEl().getBox();a=[a.x+35,a.y+26];CNOA.miniMsg.alert(lang("confirmPwdNotSameNotice"),a);d.focus(true,100);return false}c.submit({url:this.actionUrl,waitTitle:lang("notice"),method:"POST",waitMsg:lang("waiting"),params:{task:"editPasswd"},success:function(f,i){CNOA.msg.alert(i.result.msg,function(){h.close()})}.createDelegate(this),failure:function(f,i){CNOA.msg.alert(i.result.msg)}.createDelegate(this)})}else{var a=Ext.getCmp(this.ID_btn_save).getEl().getBox();a=[a.x+35,a.y+26];CNOA.miniMsg.alert(lang("formValid"),a)}}};var sm_my_myPasswd=1;