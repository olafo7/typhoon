var CNOA_adm_articles_deleteRecordIndexClass,CNOA_adm_articles_deleteRecordIndex;CNOA_adm_articles_deleteRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_deleteRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=delete";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.ID_find_stime=Ext.id();this.ID_find_etime=Ext.id();this.searchParams={name:"",user:""};this.fields=[{name:"id"},{name:"notes"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"truename"},{name:"time"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields}),listeners:{exception:function(g,f,h,e,c){var d=c.responseText;if(d!=""){var b=Ext.decode(d);if(b.failure){CNOA.msg.alert(b.msg)}}}}});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("opt"),dataIndex:"notes",width:100,sortable:true,menuDisabled:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("suppCategory"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("operator"),dataIndex:"truename",width:100,sortable:false,menuDisabled:true},{header:lang("delTime"),dataIndex:"time",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({region:"center",layout:"fit",border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("operator")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:110,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},lang("timeFrom")+"：",{xtype:"datefield",format:"Y-m-d",id:a.ID_find_stime,name:"stime",width:115},lang("to"),{xtype:"datefield",format:"Y-m-d",id:a.ID_find_etime,name:"etime",width:115},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue(),stime:Ext.getCmp(a.ID_find_stime).getRawValue(),etime:Ext.getCmp(a.ID_find_etime).getRawValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");Ext.getCmp(a.ID_find_stime).setValue("");Ext.getCmp(a.ID_find_etime).setValue("");a.searchParams={name:"",user:"",stime:"",etime:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("wantDelRecord"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.list]})}};var CNOA_adm_articles_repairRecordIndexClass,CNOA_adm_articles_repairRecordIndex;CNOA_adm_articles_repairRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_repairRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=repair";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.ID_find_stime=Ext.id();this.ID_find_etime=Ext.id();this.searchParams={name:"",user:"",stime:"",etime:""};this.fields=[{name:"id"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"stock"},{name:"quantity"},{name:"truename"},{name:"time"},{name:"notes"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields})});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("suppCategory"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("numOfMaintain"),dataIndex:"quantity",width:80,sortable:true,menuDisabled:true},{header:lang("currentInventory"),dataIndex:"stock",width:80,sortable:true,menuDisabled:true},{header:lang("maintainUser"),dataIndex:"truename",width:100,sortable:false,menuDisabled:true},{header:lang("inputTime"),dataIndex:"time",width:100,sortable:false,menuDisabled:true},{header:lang("remark"),dataIndex:"notes",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({region:"center",layout:"fit",border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("maintainUser")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:110,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},lang("timeFrom")+"：",{xtype:"datefield",format:"Y-m-d",id:a.ID_find_stime,name:"stime",width:115},lang("to"),{xtype:"datefield",format:"Y-m-d",id:a.ID_find_etime,name:"etime",width:115},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue(),stime:Ext.getCmp(a.ID_find_stime).getRawValue(),etime:Ext.getCmp(a.ID_find_etime).getRawValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");Ext.getCmp(a.ID_find_stime).setValue("");Ext.getCmp(a.ID_find_etime).setValue("");a.searchParams={name:"",user:"",stime:"",etime:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("wantDelRecord"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.list]})}};var CNOA_adm_articles_listRecordIndexClass,CNOA_adm_articles_listRecordIndex;CNOA_adm_articles_listRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_listRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=list";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.searchParams={name:"",user:""};this.fields=[{name:"id"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"stock"},{name:"lowerStock"},{name:"heightStock"},{name:"truename"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields})});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("suppCategory"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("currentInventory"),dataIndex:"stock",width:80,sortable:true,menuDisabled:true},{header:lang("lowStockAlert"),dataIndex:"lowerStock",width:80,sortable:true,menuDisabled:true},{header:lang("highAlertStock"),dataIndex:"heightStock",width:80,sortable:true,menuDisabled:true},{header:lang("warehouseMgr"),dataIndex:"truename",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({region:"center",layout:"fit",border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("warehouseMgr")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:150,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");a.searchParams={name:"",user:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("wantDelRecord"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.list]})}};var CNOA_adm_articles_borrowRecordIndexClass,CNOA_adm_articles_borrowRecordIndex;CNOA_adm_articles_borrowRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_borrowRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=borrow";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.ID_find_stime=Ext.id();this.ID_find_etime=Ext.id();this.searchParams={name:"",user:"",stime:"",etime:""};this.fields=[{name:"id"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"stock"},{name:"quantity"},{name:"truename"},{name:"type"},{name:"time"},{name:"notes"},{name:"borrower"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields})});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("suppCategory"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("type"),dataIndex:"type",width:100,sortable:true,menuDisabled:true},{header:lang("quantity"),dataIndex:"quantity",width:80,sortable:true,menuDisabled:true},{header:lang("currentInventory"),dataIndex:"stock",width:80,sortable:true,menuDisabled:true},{header:lang("borrowReturnMan"),dataIndex:"borrower",width:100,sortable:true,menuDisabled:true},{header:lang("schedulingUser"),dataIndex:"truename",width:100,sortable:false,menuDisabled:true},{header:lang("schedulingTime"),dataIndex:"time",width:100,sortable:false,menuDisabled:true},{header:lang("remark"),dataIndex:"notes",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("schedulingUser")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:110,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},lang("timeFrom")+"：",{xtype:"datefield",id:a.ID_find_stime,name:"stime",format:"Y-m-d",width:115},lang("to"),{xtype:"datefield",id:a.ID_find_etime,name:"etime",format:"Y-m-d",width:115},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue(),stime:Ext.getCmp(a.ID_find_stime).getRawValue(),etime:Ext.getCmp(a.ID_find_etime).getRawValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");Ext.getCmp(a.ID_find_stime).setValue("");Ext.getCmp(a.ID_find_etime).setValue("");a.searchParams={name:"",user:"",stime:"",etime:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("wantDelRecord"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.center=new Ext.Panel({region:"center",layout:"fit",items:[this.list]});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.center]})}};var CNOA_adm_articles_getRecordIndexClass,CNOA_adm_articles_getRecordIndex;CNOA_adm_articles_getRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_getRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=get";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.ID_find_stime=Ext.id();this.ID_find_etime=Ext.id();this.searchParams={name:"",user:"",stime:"",etime:""};this.fields=[{name:"id"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"stock"},{name:"quantity"},{name:"transname"},{name:"time"},{name:"regname"},{name:"notes"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields})});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("suppCategory"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("numOfLY"),dataIndex:"quantity",width:80,sortable:true,menuDisabled:true},{header:lang("currentInventory"),dataIndex:"stock",width:80,sortable:true,menuDisabled:true},{header:lang("schedulingUser"),dataIndex:"transname",width:100,sortable:false,menuDisabled:true},{header:lang("schedulingTime"),dataIndex:"time",width:100,sortable:false,menuDisabled:true},{header:lang("registrant"),dataIndex:"regname",width:100,sortable:false,menuDisabled:true},{header:lang("remark"),dataIndex:"notes",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({region:"center",layout:"fit",border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("schedulingUser")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:110,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},lang("timeFrom")+"：",{xtype:"datefield",format:"Y-m-d",id:a.ID_find_stime,name:"stime",width:115},lang("to"),{xtype:"datefield",format:"Y-m-d",id:a.ID_find_etime,name:"etime",width:115},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue(),stime:Ext.getCmp(a.ID_find_stime).getRawValue(),etime:Ext.getCmp(a.ID_find_etime).getRawValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");Ext.getCmp(a.ID_find_stime).setValue("");Ext.getCmp(a.ID_find_etime).setValue("");a.searchParams={name:"",user:"",stime:"",etime:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("wantDelRecord"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.list]})}};var CNOA_adm_articles_dropRecordIndexClass,CNOA_adm_articles_dropRecordIndex;CNOA_adm_articles_dropRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_dropRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=drop";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.ID_find_stime=Ext.id();this.ID_find_etime=Ext.id();this.searchParams={name:"",user:"",stime:"",etime:""};this.fields=[{name:"id"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"stock"},{name:"quantity"},{name:"truename"},{name:"time"},{name:"notes"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields})});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("suppCategory"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("scrapQuantity"),dataIndex:"quantity",width:80,sortable:true,menuDisabled:true},{header:lang("currentInventory"),dataIndex:"stock",width:80,sortable:true,menuDisabled:true},{header:lang("scrappUser"),dataIndex:"truename",width:100,sortable:false,menuDisabled:true},{header:lang("scrappOfTime"),dataIndex:"time",width:100,sortable:false,menuDisabled:true},{header:lang("remark"),dataIndex:"notes",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("scrappUser")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:110,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},lang("timeFrom")+"：",{xtype:"datefield",format:"Y-m-d",id:a.ID_find_stime,name:"stime",width:115},lang("to"),{xtype:"datefield",format:"Y-m-d",id:a.ID_find_etime,name:"etime",width:115},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue(),stime:Ext.getCmp(a.ID_find_stime).getRawValue(),etime:Ext.getCmp(a.ID_find_etime).getRawValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");Ext.getCmp(a.ID_find_stime).setValue("");Ext.getCmp(a.ID_find_etime).setValue("");a.searchParams={name:"",user:"",stime:"",etime:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("wantDelRecord"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.center=new Ext.Panel({region:"center",layout:"fit",items:[this.list]});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.center]})}};var CNOA_adm_articles_addRecordIndexClass,CNOA_adm_articles_addRecordIndex;CNOA_adm_articles_addRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_addRecordIndexClass.prototype={init:function(){var a=this;a.baseUrl="index.php?app=adm&func=record&action=add";this.ID_find_name=Ext.id();this.ID_find_user=Ext.id();this.ID_find_getUser=Ext.id();this.ID_find_stime=Ext.id();this.ID_find_etime=Ext.id();this.searchParams={name:"",user:"",stime:"",etime:""};this.fields=[{name:"id"},{name:"productNumber"},{name:"productName"},{name:"libraryName"},{name:"typeName"},{name:"stock"},{name:"quantity"},{name:"truename"},{name:"time"},{name:"notes"}];this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.baseUrl+"&task=list",disableCaching:true}),reader:new Ext.data.JsonReader({totalProperty:"total",root:"data",fields:this.fields})});this.store.load();this.sm=new Ext.grid.CheckboxSelectionModel({singleSelect:false});this.pagingBar=new Ext.PagingToolbar({displayInfo:true,emptyMsg:lang("pagingToolbarEmptyMsg"),displayMsg:lang("showDataTotal2"),store:this.store,pageSize:15,listeners:{beforechange:function(b,c){if(a.searchParams.name!=""){c.name=a.searchParams.name}if(a.searchParams.user!=""){c.user=a.searchParams.user}}}});this.colModel=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),this.sm,{header:"id",dataIndex:"id",hidden:true},{header:lang("goodCode"),dataIndex:"productNumber",width:100,sortable:true,menuDisabled:true},{header:lang("supName"),dataIndex:"productName",width:120,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"libraryName",width:100,sortable:true,menuDisabled:true},{header:lang("supLi"),dataIndex:"typeName",width:100,sortable:true,menuDisabled:true},{header:lang("bePutQuantity"),dataIndex:"quantity",width:80,sortable:true,menuDisabled:true},{header:lang("currentInventory"),dataIndex:"stock",width:80,sortable:true,menuDisabled:true},{header:lang("operator"),dataIndex:"truename",width:100,sortable:false,menuDisabled:true},{header:lang("rukuTime"),dataIndex:"time",width:100,sortable:false,menuDisabled:true},{header:lang("remark"),dataIndex:"notes",width:100,sortable:false,menuDisabled:true},{header:"",dataIndex:"noIndex",width:1,menuDisabled:true,resizable:false}]);this.list=new Ext.grid.GridPanel({region:"center",layout:"fit",border:false,store:this.store,loadMask:{msg:lang("waiting")},cm:this.colModel,sm:this.sm,stripeRows:true,hideBorders:true,tbar:[lang("supName")+"：",{xtype:"textfield",id:a.ID_find_name,width:260},lang("operator")+"：",{xtype:"hidden",id:a.ID_find_user},{id:a.ID_find_getUser,xtype:"triggerForPeople",name:"checkName",dataUrl:a.baseUrl+"&task=getAllUserListsInPermitDeptTree",width:110,listeners:{selected:function(d,c,b){Ext.getCmp(a.ID_find_user).setValue(c)}}},lang("timeFrom")+"：",{xtype:"datefield",id:a.ID_find_stime,format:"Y-m-d",width:115,name:"stime"},lang("to"),{xtype:"datefield",id:a.ID_find_etime,format:"Y-m-d",width:115,name:"etime"},{xtype:"button",text:lang("search"),handler:function(){a.searchParams={name:Ext.getCmp(a.ID_find_name).getValue(),user:Ext.getCmp(a.ID_find_user).getValue(),stime:Ext.getCmp(a.ID_find_stime).getRawValue(),etime:Ext.getCmp(a.ID_find_etime).getRawValue()};a.store.load({params:a.searchParams})}},{xtype:"button",text:lang("clear"),handler:function(){Ext.getCmp(a.ID_find_name).setValue("");Ext.getCmp(a.ID_find_user).setValue("");Ext.getCmp(a.ID_find_getUser).setValue("");Ext.getCmp(a.ID_find_stime).setValue("");Ext.getCmp(a.ID_find_etime).setValue("");a.searchParams={name:"",user:"",stime:"",etime:""};a.store.load()}}],bbar:this.pagingBar,listeners:{afterrender:function(){new Ext.Toolbar({items:[{text:lang("refresh"),iconCls:"icon-system-refresh",handler:function(b,c){a.store.reload()}},{text:lang("del"),iconCls:"icon-utils-s-delete",handler:function(b){var c=a.list.getSelectionModel().getSelections();if(c.length==0){CNOA.miniMsg.alertShowAt(b,lang("mustSelectOneRow"))}else{CNOA.msg.cf(lang("confirmToDelete"),function(e){if(e=="yes"){if(c){var f="";for(var d=0;d<c.length;d++){f+=c[d].get("id")+",";var g=c[d]}Ext.Ajax.request({url:a.baseUrl+"&task=delete",method:"POST",params:{ids:f},success:function(i){var h=Ext.decode(i.responseText);if(h.success===true){CNOA.msg.notice(h.msg,lang("articleMgr"));a.store.reload()}else{CNOA.msg.alert(h.msg,function(){})}}})}}})}}},"<span class='cnoa_color_gray'>"+lang("ctrlShiftSelect")+"</span>","->",{xtype:"cnoa_helpBtn",helpid:100}]}).render(this.tbar)}}});this.mainPanel=new Ext.Panel({collapsible:false,hideBorders:true,border:false,layout:"border",autoScroll:true,items:[this.list]})}};var CNOA_adm_articles_exportRecordIndexClass,CNOA_adm_articles_exportRecordIndex;CNOA_adm_articles_exportRecordIndexClass=CNOA.Class.create();CNOA_adm_articles_exportRecordIndexClass.prototype={init:function(){var a=this;this.baseUrl="index.php?app=adm&func=record&action=export";this.formPanel=new Ext.form.FormPanel({border:false,bodyStyle:"padding: 10px",labelAlign:"top",items:[{xtype:"checkboxgroup",fieldLabel:lang("selectRecordExport"),columns:3,allowBlank:false,items:[{boxLabel:lang("articleRKRecord"),name:"ruku"},{boxLabel:lang("articleBFRecord"),name:"baofei"},{boxLabel:lang("articleLYRecord"),name:"lingyong"},{boxLabel:lang("articleLGRecord"),name:"jieyong"},{boxLabel:lang("articleWHRecord"),name:"weihu"},{boxLabel:lang("articleKCRecord"),name:"kucun"},{boxLabel:lang("articleDelRecord"),name:"del"}]},{border:false,xtype:"compositefield",fieldLabel:lang("selectTimePeriod"),items:[{xtype:"displayfield",value:lang("from")},{xtype:"datefield",name:"stime",width:120,format:"Y-m-d"},{xtype:"displayfield",value:lang("to")},{xtype:"datefield",name:"etime",width:120,format:"Y-m-d"}]}]});this.mainPanel=new Ext.Window({width:350,height:290,title:lang("exportSupRecord"),modal:true,resizable:false,items:this.formPanel,listeners:{close:function(){Ext.destroy(CNOA_adm_articles_exportRecordIndex);CNOA_adm_articles_exportRecordIndex=null;try{a.closeTab()}catch(b){}}},buttons:[{text:lang("export2"),iconCls:"icon-excel",cls:"btn-blue4",handler:function(){a.submit()}.createDelegate(this)},{text:lang("cancel"),cls:"btn-red1",iconCls:"icon-dialog-cancel",handler:function(){a.mainPanel.close()}.createDelegate(this)}]}).show()},submit:function(){var a=this;if(this.formPanel.getForm().isValid()){this.formPanel.getForm().submit({url:this.baseUrl+"&task=exportExcel&step=1",waitMsg:lang("waiting"),method:"POST",success:function(b,c){ajaxDownload(a.baseUrl+"&task=exportExcel&file="+c.result.msg+"&step=2");a.mainPanel.close()},failure:function(b,c){CNOA.msg.alert(c.result.msg)}})}},closeTab:function(){mainPanel.closeTab(CNOA.adm.articles.exportRecordIndex.parentID.replace("docs-",""))}};var sm_articles_record=1;